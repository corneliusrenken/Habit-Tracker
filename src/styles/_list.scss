@use 'fonts';
@use 'theme';
@use 'variables';

$list-outer-margin: 21px;

.list {
  transition: opacity 600ms;

  &-item {
    @include fonts.main;
    color: theme.$primary;

    height: 50px;
    width: 350px;

    display: flex;
    align-items: center;
    gap: variables.$universal-margin;

    &.complete {
      color: theme.$tertiary;
    }

    transition: width 200ms;

    &.being-renamed {
      width: 500px; // normal width + 3 icons out of bounds
    }

    &-name, &-error, &-rename-form, &-create-form, &-placeholder, &-streak {
      position: relative; // needs explicit position value to render over ::before element
      line-height: 38px; // needed to center text properly
    }

    &-name, &-error, &-rename-form, &-create-form, &-placeholder {
      white-space: nowrap;
      overflow: hidden;
      flex-grow: 1;
      text-overflow: ellipsis;
    }

    &-name, &-error, &-rename-form, &-create-form, &-placeholder {
      margin-left: $list-outer-margin;
    }

    &-create-form, &-placeholder, &-streak {
      margin-right: $list-outer-margin;
    }

    &-placeholder { // different than ::placeholder element, used in create habit form
      color: theme.$tertiary;
    }

    &-input {
      width: 100%;

      &::placeholder {
        color: theme.$tertiary;
      }
    }

    &-error {
      color: theme.$error;
    }

    &.selected::before { // list item selector
      content: '';
      position: absolute;
      height: 38px;
      left: calc(20px - variables.$universal-margin);
      width: calc(350px - 2 * $list-outer-margin + 2 * variables.$universal-margin);
      border-radius: variables.$border-radius;
      background-color: theme.$background-active;
    }

    &-icon-button {
      position: relative; // needs explicit position value to render over ::before element
      $icon-size: 38px;
      min-width: $icon-size;
      height: $icon-size;

      margin: 0 calc((50px - $icon-size - 8px) / 2);

      display: flex;
      justify-content: center;
      align-items: center;

      &:last-of-type {
        margin-right: calc((50px - $icon-size) / 2);
      }

      &.greyed-out, .being-reordered &.move-icon {
        color: theme.$tertiary;
      }

      &.hidden {
        display: none;
      }

      transition: opacity 300ms;

      .being-renamed &:not(.rename-icon) {
        opacity: 0;
      }
    }
  }
}
