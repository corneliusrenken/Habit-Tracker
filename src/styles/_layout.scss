@use 'variables';
@use 'theme';

body {
  --layout-vertical-margin: 200px; // currently bugged, can't use % values, breaks in top calculation of scroll list
  --occurrence-height: 1000px;
  --list-height: 1000px;
}

$transition-distance: calc((50vh - 25px) - 50px - var(--layout-vertical-margin));

.layout {
  contain: paint; // instead of overflow hidden, allows sticky child

  &.list {
    height: calc(100px + var(--list-height) + 2 * var(--layout-vertical-margin));
  }

  &.occurrence {
    height: calc(var(--occurrence-height) + 25px + 50vh);
  }

  &.frozen {
    height: 100vh;
  }

  &-scroll {
    position: relative;

    width: 350px;
    left: calc(50vw - 175px);

    .list & {
      top: calc(var(--layout-vertical-margin) - var(--occurrence-height) + 50px);

    }

    .list.frozen & {
      top: calc(var(--layout-vertical-margin) - var(--occurrence-height) + 50px - var(--scroll-distance));
    }

    .occurrence & {
      top: 0px;
    }

    .occurrence.frozen & {
      top: calc(-1 * var(--scroll-distance));
    }
  }

  &-occurrences {
    background-color: rgba(0, 255, 0, 0.5);
    min-height: calc(50vh - 25px);
    height: var(--occurrence-height);
    position: sticky;
    top: calc(var(--layout-vertical-margin) - var(--occurrence-height) + 50px);
  }

  // &-days {

  // }

  &-dates {
    background-color: rgba(255, 0, 0, 0.5);
    height: 50px;
    position: sticky;
    top: calc(var(--layout-vertical-margin) + 50px);
  }

  &-list {
    background-color: rgba(255, 255, 0, 0.5);
    height: var(--list-height);
  }
}

